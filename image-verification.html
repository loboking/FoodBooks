<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodBooks - 이미지 검증 페이지</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px; }
        h1 { text-align: center; margin-bottom: 10px; color: #333; }
        .stats { text-align: center; margin-bottom: 20px; color: #666; }
        .stats span { margin: 0 10px; }
        .stats .error { color: #e74c3c; font-weight: bold; }
        .stats .warning { color: #f39c12; font-weight: bold; }
        .filters { text-align: center; margin-bottom: 20px; }
        .filters button { padding: 8px 16px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; }
        .filters .all { background: #3498db; color: white; }
        .filters .duplicates { background: #e74c3c; color: white; }
        .filters .mismatched { background: #f39c12; color: white; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .card.duplicate { border: 3px solid #e74c3c; }
        .card.mismatch { border: 3px solid #f39c12; }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card-body { padding: 15px; }
        .card-title { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
        .card-line { font-size: 12px; color: #999; margin-bottom: 5px; }
        .card-badge { display: inline-block; padding: 3px 8px; border-radius: 3px; font-size: 11px; margin-right: 5px; }
        .badge-duplicate { background: #e74c3c; color: white; }
        .badge-mismatch { background: #f39c12; color: white; }
        .badge-info { background: #3498db; color: white; }
        .duplicate-group { font-size: 12px; color: #e74c3c; margin-top: 5px; }
        .hidden { display: none !important; }
        .image-url { font-size: 10px; color: #aaa; word-break: break-all; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>FoodBooks 이미지 검증</h1>
    <div class="stats">
        <span>전체: <strong id="total">0</strong>개</span>
        <span class="error">중복 이미지: <strong id="duplicateCount">0</strong>개</span>
        <span class="warning">불일치 의심: <strong id="mismatchCount">0</strong>개</span>
    </div>
    <div class="filters">
        <button class="all" onclick="filterCards('all')">전체 보기</button>
        <button class="duplicates" onclick="filterCards('duplicate')">중복만 보기</button>
        <button class="mismatched" onclick="filterCards('mismatch')">불일치 의심만 보기</button>
    </div>
    <div class="grid" id="grid"></div>

    <script>
        // 음식 데이터 - seed-data.js에서 추출
        const foods = [
            { title: '김치찌개', image: 'https://images.unsplash.com/photo-1626804475297-41608ea09aeb?w=800', line: 11 },
            { title: '된장찌개', image: 'https://images.unsplash.com/photo-1547592166-23ac45744acd?w=800', line: 45 },
            { title: '순두부찌개', image: 'https://images.unsplash.com/photo-1547592180-85f173990554?w=800', line: 76 },
            { title: '미역국', image: 'https://images.unsplash.com/photo-1617093727343-374698b1b08d?w=800', line: 106 },
            { title: '불고기', image: 'https://images.unsplash.com/photo-1529692236671-f1f6cf9683ba?w=800', line: 140 },
            { title: '제육볶음', image: 'https://images.unsplash.com/photo-1590301157890-4810ed352733?w=800', line: 172 },
            { title: '오징어볶음', image: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=800', line: 203 },
            { title: '삼겹살 구이', image: 'https://images.unsplash.com/photo-1579631542720-3a87824fff86?w=800', line: 229 },
            { title: '비빔밥', image: 'https://images.unsplash.com/photo-1553163147-622ab57be1c7?w=800', line: 261 },
            { title: '잡채', image: 'https://images.unsplash.com/photo-1632709810780-b5a4343cebec?w=800', line: 295 },
            { title: '김치볶음밥', image: 'https://images.unsplash.com/photo-1580651315530-69c8e0026377?w=800', line: 324 },
            { title: '계란말이', image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=800', line: 352 },
            { title: '감자전', image: 'https://images.unsplash.com/photo-1525351484163-7529414344d8?w=800', line: 378 },
            { title: '멸치볶음', image: 'https://images.unsplash.com/photo-1528735602780-2552fd46c7af?w=800', line: 404 },
            { title: '짜장면', image: 'https://images.unsplash.com/photo-1617093727343-374698b1b08d?w=800', line: 431 },
            { title: '짬뽕', image: 'https://images.unsplash.com/photo-1555126634-323283e090fa?w=800', line: 464 },
            { title: '탕수육', image: 'https://images.unsplash.com/photo-1529692236671-f1f6cf9683ba?w=800', line: 496 },
            { title: '볶음밥', image: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=800', line: 530 },
            { title: '마파두부', image: 'https://images.unsplash.com/photo-1582452932831-73715c98a52a?w=800', line: 556 },
            { title: '돈카츠', image: 'https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?w=800', line: 586 },
            { title: '오야코동', image: 'https://images.unsplash.com/photo-1569050467447-ce54b3bbc37d?w=800', line: 619 },
            { title: '일본식 카레라이스', image: 'https://images.unsplash.com/photo-1569050467447-ce54b3bbc37d?w=800', line: 652 },
            { title: '우동', image: 'https://images.unsplash.com/photo-1574484284002-952d92456975?w=800', line: 685 },
            { title: '규동 (소고기덮밥)', image: 'https://images.unsplash.com/photo-1585032226651-759b368d7246?w=800', line: 712 },
            { title: '크림 파스타', image: 'https://images.unsplash.com/photo-1645112411341-6c4fd023714a?w=800', line: 741 },
            { title: '토마토 미트소스 파스타', image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=800', line: 774 },
            { title: '스테이크', image: 'https://images.unsplash.com/photo-1600891964092-4316c288032e?w=800', line: 806 },
            { title: '리조또', image: 'https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=800', line: 840 },
            { title: '시저 샐러드', image: 'https://images.unsplash.com/photo-1550304943-4f24f54ddde9?w=800', line: 868 },
            { title: '프렌치 토스트', image: 'https://images.unsplash.com/photo-1546793665-c74683f339c1?w=800', line: 897 },
            { title: '팬케이크', image: 'https://images.unsplash.com/photo-1484723091739-30a097e8f929?w=800', line: 924 },
            { title: '초코 브라우니', image: 'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?w=800', line: 951 },
            { title: '과일 요거트 볼', image: 'https://images.unsplash.com/photo-1564355808539-22fda35bed7e?w=800', line: 979 },
            { title: '딸기 스무디', image: 'https://images.unsplash.com/photo-1553530666-ba11a7da3888?w=800', line: 1008 },
            { title: '레몬에이드', image: 'https://images.unsplash.com/photo-1621263764928-df1444c5e859?w=800', line: 1033 },
            { title: '달고나 커피', image: 'https://images.unsplash.com/photo-1592663527359-cf6642f54cff?w=800', line: 1059 },
            { title: '아이스 녹차 라떼', image: 'https://images.unsplash.com/photo-1536256263959-770b48d82b0a?w=800', line: 1083 },
            { title: '주먹밥', image: 'https://images.unsplash.com/photo-1515823064-d6e0c04616a7?w=800', line: 1110 },
            { title: '토스트', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800', line: 1136 },
            { title: '쌀국수 (포)', image: 'https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800', line: 1160 },
            { title: '팟타이', image: 'https://images.unsplash.com/photo-1626804475297-41608ea09aeb?w=800', line: 1194 },
            { title: '나시고랭', image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=800', line: 1228 },
            { title: '버터 치킨 카레', image: 'https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=800', line: 1257 },
            { title: '탄두리 치킨', image: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=800', line: 1291 },
            { title: '난', image: 'https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=800', line: 1318 },
            { title: '타코', image: 'https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=800', line: 1347 },
            { title: '부리토', image: 'https://images.unsplash.com/photo-1626700051175-6818013e1d4f?w=800', line: 1380 },
            { title: '과카몰리', image: 'https://images.unsplash.com/photo-1600335895229-6e75511892c8?w=800', line: 1408 },
            { title: '떡볶이', image: 'https://images.unsplash.com/photo-1635363638580-c2809d049eee?w=800', line: 1437 },
            { title: '김밥', image: 'https://images.unsplash.com/photo-1590301157890-4810ed352733?w=800', line: 1469 },
            { title: '순대', image: 'https://images.unsplash.com/photo-1600289031464-74d374b64991?w=800', line: 1499 },
            { title: '라볶이', image: 'https://images.unsplash.com/photo-1634864572865-1cf8ff8bd23d?w=800', line: 1526 },
            { title: '해물파전', image: 'https://images.unsplash.com/photo-1583224994076-0a31b7b089e4?w=800', line: 1554 },
            { title: '까르보나라', image: 'https://images.unsplash.com/photo-1588013273468-315fd88ea34c?w=800', line: 1587 },
            { title: '봉골레 파스타', image: 'https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=800', line: 1616 },
            { title: '립아이 스테이크', image: 'https://images.unsplash.com/photo-1558030006-450675393462?w=800', line: 1647 },
            { title: '시저 샐러드', image: 'https://images.unsplash.com/photo-1550304943-4f24f54ddde9?w=800', line: 1679 },
            { title: '카프레제 샐러드', image: 'https://images.unsplash.com/photo-1592417817098-8fd3d9eb14a5?w=800', line: 1708 },
            { title: '프렌치 어니언 수프', image: 'https://images.unsplash.com/photo-1534939561126-855b8675edd7?w=800', line: 1738 },
            { title: '클램 차우더', image: 'https://images.unsplash.com/photo-1588566565463-180a5b2090d2?w=800', line: 1767 },
            { title: '클래식 치즈버거', image: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=800', line: 1799 },
            { title: '돈카츠', image: 'https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?w=800', line: 1832 },
            { title: '규동', image: 'https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=800', line: 1863 },
            { title: '카츠동', image: 'https://images.unsplash.com/photo-1617196034796-73dfa7b1fd56?w=800', line: 1891 },
            { title: '돈코츠 라멘', image: 'https://images.unsplash.com/photo-1557872943-16a5ac26437e?w=800', line: 1922 },
            { title: '연어초밥', image: 'https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?w=800', line: 1952 },
            { title: '데리야끼 치킨', image: 'https://images.unsplash.com/photo-1527477396000-e27163b481c2?w=800', line: 1982 },
            { title: '짜장면', image: 'https://images.unsplash.com/photo-1617093727343-374698b1b08d?w=800', line: 2012 },
            { title: '마파두부', image: 'https://images.unsplash.com/photo-1582452932831-73715c98a52a?w=800', line: 2043 },
            { title: '샤오롱바오', image: 'https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=800', line: 2072 },
            { title: '동파육', image: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=800', line: 2102 },
            { title: '팟타이', image: 'https://images.unsplash.com/photo-1626804475297-41608ea09aeb?w=800', line: 2134 },
            { title: '똠양꿍', image: 'https://images.unsplash.com/photo-1548943487-a2e4e43b4853?w=800', line: 2165 },
            { title: '포', image: 'https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800', line: 2193 },
            { title: '버터 치킨', image: 'https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=800', line: 2224 },
            { title: '난', image: 'https://images.unsplash.com/photo-1601050690597-df0568f70950?w=800', line: 2254 },
            { title: '탄두리 치킨', image: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=800', line: 2283 },
            { title: '카르네 아사다 타코', image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800', line: 2313 },
            { title: '치킨 부리토', image: 'https://images.unsplash.com/photo-1626700051175-6818013e1d4f?w=800', line: 2342 },
            { title: '나초 수프림', image: 'https://images.unsplash.com/photo-1513456852971-30c0b8199d4d?w=800', line: 2371 },
            { title: '국물떡볶이', image: 'https://images.unsplash.com/photo-1635963662853-f0ef2c5e4b2d?w=800', line: 2402 },
            { title: '참치김밥', image: 'https://images.unsplash.com/photo-1553163147-622ab57be1c7?w=800', line: 2430 },
            { title: '쫄면', image: 'https://images.unsplash.com/photo-1557872943-16a5ac26437e?w=800', line: 2458 },
            { title: '소금빵', image: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?w=800', line: 2488 },
            { title: '초코케이크', image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800', line: 2516 },
            { title: '바닐라 아이스크림', image: 'https://images.unsplash.com/photo-1570197788417-0e82375c9371?w=800', line: 2544 },
            { title: '망고 스무디', image: 'https://images.unsplash.com/photo-1546173159-315724a31696?w=800', line: 2572 },
            { title: '아이스 아메리카노', image: 'https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?w=800', line: 2596 },
            { title: '유자차', image: 'https://images.unsplash.com/photo-1576092768241-dec231879fc3?w=800', line: 2619 },
            { title: '계란말이', image: 'https://images.unsplash.com/photo-1525351326368-efbb5cb6814d?w=800', line: 2644 },
            { title: '데리야끼 소스', image: 'https://images.unsplash.com/photo-1472476443507-c7a5948772fc?w=800', line: 2670 },
            { title: '과카몰리', image: 'https://images.unsplash.com/photo-1600865393348-86e8f5b23e95?w=800', line: 2696 },
            { title: '버섯 리조또', image: 'https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=800', line: 2724 },
            { title: '해산물 그라탕', image: 'https://images.unsplash.com/photo-1539136788836-5699e78bfc75?w=800', line: 2758 },
            { title: '오코노미야키', image: 'https://images.unsplash.com/photo-1579871494447-9811cf80d66c?w=800', line: 2789 },
            { title: '야키소바', image: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=800', line: 2819 },
            { title: '미소라멘', image: 'https://images.unsplash.com/photo-1591814468924-caf88d1232e1?w=800', line: 2848 },
            { title: '고로케', image: 'https://images.unsplash.com/photo-1534422298391-e4f8c172dddb?w=800', line: 2877 },
            { title: '탕수육', image: 'https://images.unsplash.com/photo-1529692236671-f1f6cf9683ba?w=800', line: 2906 },
            { title: '볶음밥', image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=800', line: 2937 },
            { title: '깐풍기', image: 'https://images.unsplash.com/photo-1525755662778-989d0524087e?w=800', line: 2965 },
            { title: '팔보채', image: 'https://images.unsplash.com/photo-1563245372-f21724e3856d?w=800', line: 2993 },
            { title: '군만두', image: 'https://images.unsplash.com/photo-1496116218417-1a781b1c416c?w=800', line: 3021 },
            { title: '양장피', image: 'https://images.unsplash.com/photo-1534422298391-e4f8c172dddb?w=800', line: 3049 },
            { title: '순대', image: 'https://images.unsplash.com/photo-1600289031464-74d374b64991?w=800', line: 3078 },
            { title: '어묵탕', image: 'https://images.unsplash.com/photo-1547592180-85f173990554?w=800', line: 3105 },
            { title: '라볶이', image: 'https://images.unsplash.com/photo-1634864572865-1cf8ff8bd23d?w=800', line: 3131 },
            { title: '모듬튀김', image: 'https://images.unsplash.com/photo-1626082896492-766af4eb6501?w=800', line: 3157 },
            { title: '핫도그', image: 'https://images.unsplash.com/photo-1612392062422-ef19b42f74df?w=800', line: 3182 },
            { title: '찐만두', image: 'https://images.unsplash.com/photo-1534422298391-e4f8c172dddb?w=800', line: 3208 },
            { title: '계란빵', image: 'https://images.unsplash.com/photo-1607301405752-725edd6882f2?w=800', line: 3233 },
            { title: '오뎅볶음', image: 'https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=800', line: 3258 },
            { title: '마카롱', image: 'https://images.unsplash.com/photo-1558326567-98ae2405596b?w=800', line: 3284 },
            { title: '티라미수', image: 'https://images.unsplash.com/photo-1586040140378-b5634cb4c8fc?w=800', line: 3311 },
            { title: '브라우니', image: 'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?w=800', line: 3339 },
            { title: '크레페', image: 'https://images.unsplash.com/photo-1584278858536-52532423b9ea?w=800', line: 3366 },
            { title: '푸딩', image: 'https://images.unsplash.com/photo-1527325678964-54921661f888?w=800', line: 3392 },
            { title: '와플', image: 'https://images.unsplash.com/photo-1562376552-0d160a2f238d?w=800', line: 3417 },
            { title: '에그타르트', image: 'https://images.unsplash.com/photo-1614707267537-b85aaf00c4b7?w=800', line: 3443 },
            { title: '팬케이크', image: 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=800', line: 3468 },
            { title: '딸기 스무디', image: 'https://images.unsplash.com/photo-1553530666-ba11a7da3888?w=800', line: 3494 },
            { title: '버블티', image: 'https://images.unsplash.com/photo-1558857563-b371033873b8?w=800', line: 3518 },
            { title: '레몬에이드', image: 'https://images.unsplash.com/photo-1621263764928-df1444c5e859?w=800', line: 3542 },
            { title: '핫초코', image: 'https://images.unsplash.com/photo-1542990253-0d0f5be5f0ed?w=800', line: 3566 },
            { title: '밀크쉐이크', image: 'https://images.unsplash.com/photo-1572490122747-3968b75cc699?w=800', line: 3589 },
            { title: '녹차 라떼', image: 'https://images.unsplash.com/photo-1515823064-d6e0c04616a7?w=800', line: 3611 },
            { title: '자몽에이드', image: 'https://images.unsplash.com/photo-1560508179-b2c9a3f8e92b?w=800', line: 3634 },
            { title: '아인슈페너', image: 'https://images.unsplash.com/photo-1461023058943-07fcbe16d735?w=800', line: 3658 },
            { title: '나시고랭', image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=800', line: 3682 },
            { title: '미고랭', image: 'https://images.unsplash.com/photo-1585032226651-759b368d7246?w=800', line: 3709 },
            { title: '사테', image: 'https://images.unsplash.com/photo-1529563021893-cc83c992d75d?w=800', line: 3733 },
            { title: '락사', image: 'https://images.unsplash.com/photo-1569562211093-4ed0d0758f12?w=800', line: 3758 },
            { title: '반미', image: 'https://images.unsplash.com/photo-1600688640154-9619e002df30?w=800', line: 3784 },
            { title: '분짜', image: 'https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800', line: 3810 },
            { title: '껌쏘이', image: 'https://images.unsplash.com/photo-1621293954908-907159247fc8?w=800', line: 3836 },
            { title: '솜땀', image: 'https://images.unsplash.com/photo-1623689046286-01bd6d3bce52?w=800', line: 3861 },
            { title: '렌당', image: 'https://images.unsplash.com/photo-1574484284002-952d92456975?w=800', line: 3888 },
            { title: '사모사', image: 'https://images.unsplash.com/photo-1601050690117-94f5f6fa8bd7?w=800', line: 3913 },
            { title: '팔락 파니르', image: 'https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=800', line: 3938 },
            { title: '달', image: 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=800', line: 3964 },
            { title: '차이', image: 'https://images.unsplash.com/photo-1571934811356-5cc061b6821f?w=800', line: 3989 },
            { title: '라씨', image: 'https://images.unsplash.com/photo-1626078437693-c4e7bb1c5f08?w=800', line: 4015 },
            { title: '비리야니', image: 'https://images.unsplash.com/photo-1563379091339-03b21ab4a4f8?w=800', line: 4038 },
            { title: '코르마', image: 'https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=800', line: 4064 },
            { title: '로티', image: 'https://images.unsplash.com/photo-1606471191009-63994c53433b?w=800', line: 4090 },
            { title: '파코라', image: 'https://images.unsplash.com/photo-1517244683847-7456b63c5969?w=800', line: 4113 },
            { title: '케사디아', image: 'https://images.unsplash.com/photo-1618040996337-56904b7850b9?w=800', line: 4139 },
            { title: '엔칠라다', image: 'https://images.unsplash.com/photo-1534352956036-cd81e27fed21?w=800', line: 4164 },
            { title: '파히타', image: 'https://images.unsplash.com/photo-1625164274792-35c9e0ed091b?w=800', line: 4189 },
            { title: '칠리콘카르네', image: 'https://images.unsplash.com/photo-1455619452474-d2be8b1e70cd?w=800', line: 4215 },
            { title: '또르티야', image: 'https://images.unsplash.com/photo-1600891964599-f61ba0e24092?w=800', line: 4242 },
            { title: '살사', image: 'https://images.unsplash.com/photo-1541658016709-82535e94bc69?w=800', line: 4267 },
            { title: '엘로테', image: 'https://images.unsplash.com/photo-1470119693884-47d3a1d1f180?w=800', line: 4292 },
            { title: '추로스', image: 'https://images.unsplash.com/photo-1626198226928-85bcfcdf5938?w=800', line: 4317 },
            { title: '초리소 타코', image: 'https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=800', line: 4343 }
        ];

        // 중복 이미지 및 불일치 의심 항목 분석
        const imageMap = {};
        const duplicates = new Set();

        // 명백히 불일치하는 조합 (다른 종류의 음식)
        const mismatchedPairs = [
            { foods: ['짜장면', '미역국'], reason: '짜장면에 미역국 이미지 사용' },
            { foods: ['탕수육', '불고기'], reason: '탕수육에 불고기 이미지 사용' },
            { foods: ['팟타이', '김치찌개'], reason: '팟타이에 김치찌개 이미지 사용' },
            { foods: ['김밥', '제육볶음'], reason: '김밥에 제육볶음 이미지 사용' },
            { foods: ['나시고랭', '계란말이'], reason: '나시고랭에 계란말이 이미지 사용' },
            { foods: ['토마토 미트소스 파스타', '계란말이'], reason: '파스타에 계란말이 이미지 사용' },
            { foods: ['동파육', '오징어볶음'], reason: '동파육에 오징어볶음 이미지 사용' },
            { foods: ['쫄면', '돈코츠 라멘'], reason: '쫄면에 라멘 이미지 사용' },
            { foods: ['참치김밥', '비빔밥'], reason: '참치김밥에 비빔밥 이미지 사용' },
            { foods: ['볶음밥', '계란말이'], reason: '볶음밥에 계란말이 이미지 사용' }
        ];

        foods.forEach((food, idx) => {
            const imageId = food.image.split('/').pop().split('?')[0];
            if (!imageMap[imageId]) {
                imageMap[imageId] = [];
            }
            imageMap[imageId].push({ ...food, idx });
        });

        Object.keys(imageMap).forEach(imageId => {
            if (imageMap[imageId].length > 1) {
                imageMap[imageId].forEach(food => {
                    duplicates.add(food.idx);
                });
            }
        });

        // 불일치 의심 항목 확인
        const mismatchedFoods = new Set();
        mismatchedPairs.forEach(pair => {
            foods.forEach((food, idx) => {
                if (pair.foods.includes(food.title)) {
                    mismatchedFoods.add(idx);
                }
            });
        });

        // 통계 업데이트
        document.getElementById('total').textContent = foods.length;
        document.getElementById('duplicateCount').textContent = duplicates.size;
        document.getElementById('mismatchCount').textContent = mismatchedFoods.size;

        // 카드 렌더링
        const grid = document.getElementById('grid');

        foods.forEach((food, idx) => {
            const isDuplicate = duplicates.has(idx);
            const isMismatch = mismatchedFoods.has(idx);
            const imageId = food.image.split('/').pop().split('?')[0];
            const duplicateGroup = imageMap[imageId];

            const card = document.createElement('div');
            card.className = `card ${isDuplicate ? 'duplicate' : ''} ${isMismatch ? 'mismatch' : ''}`;
            card.dataset.type = isDuplicate ? 'duplicate' : (isMismatch ? 'mismatch' : 'normal');

            let badges = '';
            if (isDuplicate) badges += '<span class="card-badge badge-duplicate">중복</span>';
            if (isMismatch) badges += '<span class="card-badge badge-mismatch">불일치 의심</span>';

            let duplicateInfo = '';
            if (isDuplicate && duplicateGroup.length > 1) {
                const others = duplicateGroup.filter(f => f.idx !== idx).map(f => f.title).join(', ');
                duplicateInfo = `<div class="duplicate-group">동일 이미지: ${others}</div>`;
            }

            card.innerHTML = `
                <img src="${food.image}" alt="${food.title}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x200?text=Image+Error'">
                <div class="card-body">
                    <div class="card-title">${food.title}</div>
                    <div class="card-line">Line: ${food.line}</div>
                    ${badges}
                    ${duplicateInfo}
                    <div class="image-url">${food.image}</div>
                </div>
            `;

            grid.appendChild(card);
        });

        // 필터 기능
        function filterCards(type) {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                if (type === 'all') {
                    card.classList.remove('hidden');
                } else if (type === 'duplicate') {
                    card.classList.toggle('hidden', card.dataset.type !== 'duplicate');
                } else if (type === 'mismatch') {
                    card.classList.toggle('hidden', !card.classList.contains('mismatch'));
                }
            });
        }
    </script>
</body>
</html>
